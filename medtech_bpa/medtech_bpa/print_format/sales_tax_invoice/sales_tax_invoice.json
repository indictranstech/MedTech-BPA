{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2021-04-26 09:49:46.002934",
 "css": "",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<style type=\"text/css\">\n  .bth{\n    border-top: hidden;\n  }\n  .brh{\n    border-right: hidden;\n  }\n  .blh{\n    border-left: hidden;\n  }\n</style>\n\n<div class=\"container-fluid\">\n  {%- from \"templates/print_formats/standard_macros.html\" import add_header,\n     render_field -%}\n     {% if doc.signed_einvoice %}\n     {%- set einvoice = json.loads(doc.signed_einvoice) -%}\n\n    <!-- <div id=\"header-html\" class=\"hidden-pdf\">\n                 {{ letter_head }}\n      </div> -->\n  <center><b>TAX INVOICE</b></center>\n  <table border=\"1px\" bordercolor=\"#a9a9a9\" style=\"table-layout: fixed;\" width=\"100%\">\n  <tbody>\n    <tr>\n      <td colspan=\"12\"><b>Transaction Details</b></td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>IRN</b></td>\n      <td colspan=\"5\" style=\"word-break: break-all;\" class=\"brh\">{{einvoice.Irn or \"\"}}</td>\n      <td colspan=\"4\" rowspan=\"6\" style=\"text-align: center;\" class=\"blh\"><img src=\"{{ doc.qrcode_image }}\" alt=\"\" style=\"height:150px; width: 160px;\"></td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Ack. No</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{einvoice.AckNo or \"\"}}</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Ack. Date</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{ frappe.utils.format_datetime(einvoice.AckDt, \"dd/MM/yyyy hh:mm:ss\") }}</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Category</b></td>\n      <td colspan=\"3\" class=\"brh\">{{einvoice.TranDtls.SupTyp}}</td>\n      <!-- {% set gst_settings = frappe.get_doc(\"GST Settings\")%}\n      {% set b2c_limit = gst_settings.b2c_limit %}\n      \n      {% if doc.gst_category in  ['Registered Regular','Deemed Export','SEZ']%}\n      <td colspan=\"5\" class=\"blh brh\">B2B</td>\n       {% elif doc.is_return == 1 %}\n       <td colspan=\"5\" class=\"blh brh\">CDNR</td>\n      {% elif doc.gst_category in ['Overseas'] %}\n      <td colspan=\"5\" class=\"blh brh\">EXPORT</td>\n      {% elif doc.grand_total > b2c_limit|int %}\n      <td  colspan=\"5\" class=\"blh brh\">B2C Large</td>\n       {% elif doc.grand_total <= b2c_limit|int %}\n       <td colspan=\"5\" class=\"blh brh\">B2C Small</td>\n      {% endif%} -->\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Document Type</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{einvoice.DocDtls.Typ}}</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Document No</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{ einvoice.DocDtls.No }}</td>\n    </tr>\n  </tbody>\n  {% else %}\n  <center><b>TAX INVOICE</b></center>\n  <table border=\"1px\" bordercolor=\"#a9a9a9\" style=\"table-layout: fixed;\" width=\"100%\">\n  <tbody>\n    <tr>\n      <td colspan=\"12\"><b>Transaction Details</b></td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>IRN</b></td>\n      <td colspan=\"5\" style=\"word-break: break-all;\" class=\"brh\">{{doc.irn or \"\"}}</td>\n      <td colspan=\"4\" rowspan=\"6\" style=\"text-align: center;\" class=\"blh\"><img src=\"{{ doc.qrcode_image }}\" alt=\"\" style=\"height:150px; width: 160px;\"></td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Ack. No</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{doc.ack_no or \"\"}}</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Ack. Date</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{ frappe.utils.formatdate(doc.ack_date, \"dd-mm-yyyy\") }} {{doc.posting_time}}</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Category</b></td>\n      {% set gst_settings = frappe.get_doc(\"GST Settings\")%}\n      {% set b2c_limit = gst_settings.b2c_limit %}\n      \n      {% if doc.gst_category in  ['Registered Regular','Deemed Export','SEZ']%}\n      <td colspan=\"5\" class=\"blh brh\">B2B</td>\n       {% elif doc.is_return == 1 %}\n       <td colspan=\"5\" class=\"blh brh\">CDNR</td>\n      {% elif doc.gst_category in ['Overseas'] %}\n      <td colspan=\"5\" class=\"blh brh\">EXPORT</td>\n      {% elif doc.grand_total > b2c_limit|int %}\n      <td  colspan=\"5\" class=\"blh brh\">B2C Large</td>\n       {% elif doc.grand_total <= b2c_limit|int %}\n       <td colspan=\"5\" class=\"blh brh\">B2C Small</td>\n      {% endif%}\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Document Type</b></td>\n      <td colspan=\"5\" class=\"blh brh\">INV</td>\n    </tr>\n    <tr class=\"bth\">\n      <td colspan=\"3\" class=\"brh\"><b>Document No</b></td>\n      <td colspan=\"5\" class=\"blh brh\">{{doc.name}}</td>\n    </tr>\n  </tbody>\n  {% endif %}\n</table>\n    \n      {% set caddress_line1 = frappe.db.get_value(\"Address\", doc.company_address, \"address_line1\") %}\n          {% set caddress_line2 = frappe.db.get_value(\"Address\", doc.company_address, \"address_line2\") %}\n          {% set ccity = frappe.db.get_value(\"Address\",doc.company_address, \"city\") %}\n          {% set cpincode = frappe.db.get_value(\"Address\", doc.company_address, \"pincode\") %}\n          {% set cstate = frappe.db.get_value(\"Address\", doc.company_address, \"state\") %}\n          {% set ccountry = frappe.db.get_value(\"Address\", doc.company_address, \"country\") %}\n          {% set cgstin = frappe.db.get_value(\"Address\", doc.company_address, \"gstin\") %}\n          {% set ccin = frappe.db.get_value(\"Company\", doc.company, \"cin\") %}\n          {% set cgst_state = frappe.db.get_value(\"Address\", doc.company_address, \"gst_state\") %}\n          {% set cgst_state_no = frappe.db.get_value(\"Address\", doc.company_address, \"gst_state_number\") %}\n          {% set cemail = frappe.db.get_value(\"Address\", doc.company_address, \"email_id\") %}\n      \n      \n      {%set dn_no = frappe.db.get_value(\"Sales Invoice Item\",{'parent':doc.name }, \"delivery_note\")%}\n      {%set dn_date = frappe.db.get_value(\"Delivery Note\",{'name': dn_no }, \"posting_date\")%}\n      {% set drug_no = frappe.db.get_value(\"Company\",{'name':doc.company }, \"company_drug_licence_no\") %}\n      <table border=\"1px\" bordercolor=\"#a9a9a9\" style=\"table-layout: fixed;\" width=\"100%\">\n    <tbody><tr><td colspan=\"3\" rowspan=\"3\"><b>{{doc.company}}</b><br>{{caddress_line1}}<br>{{caddress_line2}}<br>GSTIN/UIN : {{cgstin}}<br>State Name : {{cstate}} Code : {{cgst_state_no}}<br>CIN :{{ccin or ''}} <br>Email : {{cemail or ''}}<br>Drug Licence No: {{drug_no or \"\"}}</td>\n      <td>Invoice No : <br><b>{{doc.name}}</b></td>\n      <td>Date : <br><b>{{ frappe.utils.formatdate(doc.posting_date, \"dd-mm-yyyy\") }}<b></b></b></td>\n    </tr>\n    {% set number_dn = [] %}\n        {% for item in doc.items %}\n          {% if item.delivery_note not in number_dn %}\n                {{ number_dn.append(item.delivery_note) or '' }}\n            {% endif %}\n        {% endfor %}\n    <tr><td>Delivery Note<br><b>{% for item in number_dn %}{{item or \"\"}}<br> {% endfor %}</b></td>\n      <td>Mode /Terms of Payment<br><b>{{doc.payment_terms_template or ''}}</b></td>\n    </tr>\n    <tr>\n      <td>Supplier Refernece </td>\n      <td>Other References</td>\n    </tr>\n    {%set dn_no = frappe.db.get_value(\"Sales Invoice Item\",{'parent':doc.name }, \"delivery_note\")%}\n      \n      {% set address_line1 = frappe.db.get_value(\"Address\", doc.customer_address, \"address_line1\") %}\n      {% set address_line2 = frappe.db.get_value(\"Address\", doc.customer_address, \"address_line2\") %}\n      {% set city = frappe.db.get_value(\"Address\",doc.customer_address, \"city\") %}\n      {% set pincode = frappe.db.get_value(\"Address\", doc.customer_address, \"pincode\") %}\n      {% set state = frappe.db.get_value(\"Address\", doc.customer_address, \"state\") %}\n      {% set country = frappe.db.get_value(\"Address\", doc.customer_address, \"country\") %}\n      {% set gstin = frappe.db.get_value(\"Address\", doc.customer_address, \"gstin\") %}\n      {% set gst_state = frappe.db.get_value(\"Address\", doc.customer_address, \"gst_state\") %}\n      {% set gst_state_no = frappe.db.get_value(\"Address\", doc.customer_address, \"gst_state_number\") %}\n      {% set email = frappe.db.get_value(\"Address\", doc.customer_address, \"email_id\") %}\n      {% set phone = frappe.db.get_value(\"Address\", doc.customer_address, \"phone\") %}\n      {% set drug_licence_no = frappe.db.get_value(\"Customer\", doc.customer, \"drug_licence_no\") %}\n      {% set pan = frappe.db.get_value(\"Customer\", doc.customer, \"tax_id\") %}\n      {%set so_no = frappe.db.get_value(\"Sales Invoice Item\",{'parent':doc.name }, \"sales_order\")%}\n      {%set so_date = frappe.db.get_value(\"Sales Order\",{'name': so_no }, \"transaction_date\")%}\n      \n      {% if doc.shipping_address_name %}\n      {% set shipping_address_line1 = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_line1\") %}\n      {% set shipping_address_line2 = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"address_line2\") %}\n      {% set shipping_city = frappe.db.get_value(\"Address\",doc.shipping_address_name, \"city\") %}\n      {% set shipping_pincode = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"pincode\") %}\n      {% set shipping_state = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"state\") %}\n      {% set shipping_country = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"country\") %}\n      {% set shipping_gstin = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"gstin\") %}\n      {% set shipping_gst_state = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"gst_state\") %}\n      {% set shipping_gst_state_no = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"gst_state_number\") %}\n      {% set shipping_email = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"email_id\") %}\n      {% set shipping_phone = frappe.db.get_value(\"Address\", doc.shipping_address_name, \"phone\") %}\n      \n    <tr><td colspan=\"3\" rowspan=\"4\"><b>Consignee: {{doc.customer or \"\"}}</b><br>{{shipping_address_line1}}<br>{{shipping_address_line2}}{{shipping_city}}{{shipping_pincode}}<br>Tel # {{shipping_phone}}<br>{{drug_licence_no or ''}}<br>Email : {{shipping_email or ''}}<br>GSTIN/UIN : {{shipping_gstin}}<br>PAN/IT No. : {{pan}}<br>State Name : {{shipping_gst_state}} Code : {{shipping_gst_state_no}}</td>\n    \t\n      {% set number_so = [] %}\n        {% for item in doc.items %}\n          {% if item.sales_order not in number_so %}\n                {{ number_so.append(item.sales_order) or '' }}\n            {% endif %}\n        {% endfor %}\n      <td>Buyer Order No.<br><b>\n       \n        {% for row in number_so %}\n      {{ row or ''}}<br>\n    {% endfor %}\n      </b></td>\n      <td>Date<br><b>{{frappe.utils.formatdate(so_date,\"mm-dd-yyyy\") or \"\"}}</b></td>\n    </tr>\n    {% else %}\n     <tr><td colspan=\"3\" rowspan=\"4\"><b>Consignee: {{doc.customer or \"\"}}</b><br>{{address_line1}}<br>{{address_line2}}{{city}}{{pincode}}<br>Tel # {{phone}}<br>{{drug_licence_no or ''}}<br>Email : {{email or ''}}<br>GSTIN/UIN : {{gstin}}<br>PAN/IT No. : {{pan}}<br>State Name : {{state}} Code : {{gst_state_no}}</td>\n      {% set number_so = [] %}\n        {% for item in doc.items %}\n          {% if item.sales_order not in number_so %}\n                {{ number_so.append(item.sales_order) or '' }}\n            {% endif %}\n        {% endfor %}\n      <td>Buyer Order No.<br><b>\n       \n        {% for row in number_so %}\n\t\t\t{{ row or ''}}<br>\n\t\t{% endfor %}\n      </b></td>\n      <td>Date<br><b>{{frappe.utils.formatdate(so_date,\"mm-dd-yyyy\") or \"\"}}</b></td>\n    </tr>\n    {% endif %}\n    <tr><td>Dispatch Document No.</td>\n      <td>Delivery Note Date<br><b>{{frappe.utils.formatdate(dn_date,\"mm-dd-yyyy\") or \"\"}}</b></td>\n    </tr>\n    <tr>\n      <td>Despatched through<br><b>{{doc.transporter or ''}}</b></td>\n      <td>Destination<br><b>{{city}}</b></td>\n    </tr>\n    <tr>\n      <td>Bill of Lading/LR-RR No<br><b>{{doc.lr_no or ''}}</b></td>\n      <td>Motor Vehicle No:<br><b>{{doc.vehicle_no or ''}}</b></td>\n    </tr>\n    <tr><td colspan=\"3\" rowspan=\"1\"><b>Buyer (if other than consignee): {{doc.customer or \"\"}}</b><br>{{address_line1}}<br>{{address_line2}}{{city}}{{pincode}}<br>Tel # {{phone}}<br>{{drug_licence_no or ''}}<br>Email : {{email or ''}}<br>GSTIN/UIN : {{gstin}}<br>PAN/IT No. : {{pan}}<br>State Name : {{state}} Code : {{gst_state_no}}<br>Place Of Supply: {{ doc.place_of_supply or \"\"}}</td>\n    <td colspan=\"2\">Terms of Delivery</td>\n    </tr>\n  </tbody></table>\n  <table class=\"table table-bordered\">\n      <thead>\n        {% set global_default= frappe.get_doc(\"Global Defaults\")%}\n        {% set default_currency = global_default.default_currency %}\n            {% set symbol = frappe.db.get_value(\"Currency\",{\"name\":default_currency},\"symbol\")%}\n\n      <tr>\n      <th>SI No</th>\n      <th>Description of Goods</th>\n      <th>HSN/SAC</th>\n      <th>Qty(Pkt)</th>\n      <th>Rate/(Pkt)</th>\n      <th>Per</th>\n       <th>Discount %</th>\n      <th>Amount</th> \n    </tr>\n  </thead>\n  <tbody>\n    {% set global_default= frappe.get_doc(\"Global Defaults\")%}\n        {% set default_currency = global_default.default_currency %}\n            {% set symbol = frappe.db.get_value(\"Currency\",{\"name\":default_currency},\"symbol\")%}\n    {% for item in doc.items %}\n    <tr>\n      <td>{{item.idx}}</td>\n      <td><b>{{item.item_code}}-{{item.item_name}}</b>-{{item.description}}</td>\n      <td>{{item.gst_hsn_code}}</td>\n      <td>{{item.qty}}</td>\n      <td>{{item.rate}}</td>\n      <td>{{item.stock_uom}}</td>\n      <td>{{item.discount_percentage}}</td>\n      <td>{{item.amount}}</td>\n    </tr>\n    {% endfor %}\n  \n    </tr>\n    <tr>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td><b>{{doc.total}}</b></td>\n    </tr>\n    {% for tax in doc.taxes %}\n    <tr>\n      <td></td>\n      <td><b>{{tax.account_head}}</b></td>\n      <td></td>\n      <td></td>\n      <td>{{tax.rate}}</td>\n      <td>%</td>\n      <td></td>\n      <td>{{tax.tax_amount}}</td>\n    \n    </tr>\n     {% endfor %}\n     <tr>\n      <td></td>\n      <td>Less:  <b>Round Off</b></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td><b>{{doc.rounding_adjustment}}</b></td>\n    </tr>\n    <tr>\n      <td></td>\n      <td><b>Total</b></td>\n      <td></td>\n      <td>{{doc.total_qty }}</td>\n      <td></td>\n      <td></td>\n      <td></td>\n      <td><b>{{symbol}}{{doc.rounded_total}}</b></td>\n    </tr>\n    </tbody>   \n    </table>\n    <table class=\"table table-bordered\">\n<tr>\n  <td>Amount Chargeable (in words)<br><b>{{doc.in_words}}</b></td>\n</tr>\n</table>\n\n\n<table class=\"table table-bordered\">\n<tr>\n  <td><b>{{doc.other_charges_calculation}}</b></td>\n</tr>\n<tr>\n  <td>Total Taxes & Charges Amount (in words):<b> {{ frappe.utils.money_in_words(doc.total_taxes_and_charges)}}</b></td>\n  \n</tr>\n<tr>\n  {%set company_pan = frappe.db.get_value(\"Company\",{\"name\":doc.company},\"company_pan\")%}\n  {% set company= frappe.get_doc(\"Company\", {\"name\":doc.company}) %}\n  {% if company.default_bank_account %}\n  {% set bank= frappe.get_doc(\"Bank Account\", {\"account\":company.default_bank_account}) %}\n  {% endif %}\n  <td>Remarks:<br>\n      Company's PAN : {{company.company_pan or \"\"}}<br>\n      {% if company.default_bank_account %}\n      Bank Name: {{bank.bank or \"\"}}<br>Bank Account No: {{bank.bank_account_no or \"\"}}<br>\n      Branch Code: {{bank.branch_code or \"\"}}<br>IFSC code: {{bank.ifsc_code or \"\"}}\n      {% endif %}\n  </td>\n</tr>\n\n</table>\n<table class=\"table table-bordered\">\n  <tr>\n  <td colspan=\"2\"><u>Declaration</u><br>\nWe declare that this invoice shows the actual price of the\ngoods described and that all particulars are true and correct.<br>\nTerms and conditions<br>\n1.Goods once sold will not be taken back on any account.<br>\n2.We are not responsible for any breakage,leakage or any\nkind of loss whatsoever in transit.<br>\n3.Interest @ 18% p.a. will be charged on Overdue Bills.</td>\n<td>\n  <div class=\"panel panel-default\">\n          {%set fiscal_year = frappe.db.get_value(\"Global Defaults\",{\"default_company\":doc.company},\"current_fiscal_year\",as_dict = True)%}\n          <div class=\"panel-body\" style=\"text-align: left;\"><b>for {{doc.company }}</b><br><br><br>\n            <p style=\"text-align: right;\">Authorised Signatory</p>\n      </div>\n        </div>\n</td>\n</tr>\n</table>\n</div>\n<!-- <div class=\"visible-pdf\"></div>\n  <div class=\"footer\">\n    {% if not no_letterhead and footer %}\n    <div class=\"letter-head-footer\">\n      {{ footer }}\n    </div>\n    {% endif %}\n   {% set total_pages = [1] %}\n</div> -->\n<div id=\"footer-html\" class=\"visible-pdf\">\n  {% if not no_letterhead and footer %}\n  <div class=\"letter-head-footer\">\n    {{ footer }}\n  </div>\n  {% endif %}\n  <p class=\"text-center small page-number visible-pdf\">\n    {{ _(\"Page {0} of {1}\").format('<span class=\"page\"></span>', '<span class=\"topage\"></span>') }}\n  </p>\n</div>\n  ",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-04-26 15:47:00.245225",
 "modified_by": "Administrator",
 "module": "MedTech-BPA",
 "name": "Sales Tax Invoice",
 "owner": "Administrator",
 "parent": "Sales Invoice",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}